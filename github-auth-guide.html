<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub OAuth è®¤è¯é…ç½®æŒ‡å—</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #24292e;
            border-bottom: 3px solid #0366d6;
            padding-bottom: 10px;
        }
        h2 {
            color: #0366d6;
            margin-top: 30px;
        }
        h3 {
            color: #586069;
        }
        .step {
            background-color: #f6f8fa;
            border-left: 4px solid #0366d6;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .code-block {
            background-color: #1b1f23;
            color: #e1e4e8;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
        }
        .warning {
            background-color: #fffbdd;
            border: 1px solid #f0b849;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .success {
            background-color: #dcffe4;
            border: 1px solid #34d058;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .info {
            background-color: #dfe7f3;
            border: 1px solid #79b8ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f6f8fa;
            font-weight: bold;
        }
        code {
            background-color: #f3f4f6;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
        .example {
            background-color: #f0f9ff;
            border: 1px solid #1890ff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .screenshot {
            border: 2px solid #ddd;
            border-radius: 5px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” GitHub OAuth è®¤è¯é…ç½®æŒ‡å—</h1>
        
        <div class="info">
            <strong>ğŸ“‹ æœ¬æŒ‡å—è¯´æ˜ï¼š</strong>
            <ul>
                <li>å¦‚ä½•åœ¨ GitHub ä¸Šåˆ›å»º OAuth åº”ç”¨</li>
                <li>å¦‚ä½•é…ç½®æœ¬åœ°åº”ç”¨çš„ GitHub è®¤è¯</li>
                <li>å¦‚ä½•æµ‹è¯• OAuth è®¤è¯æµç¨‹</li>
                <li>å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</li>
            </ul>
        </div>

        <h2>ä¸€ã€åˆ›å»º GitHub OAuth åº”ç”¨</h2>

        <div class="step">
            <h3>æ­¥éª¤ 1ï¼šç™»å½• GitHub å¹¶è®¿é—®è®¾ç½®é¡µé¢</h3>
            <ol>
                <li>è®¿é—® <a href="https://github.com" target="_blank">GitHub.com</a> å¹¶ç™»å½•æ‚¨çš„è´¦æˆ·</li>
                <li>ç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œé€‰æ‹© <strong>Settings</strong>ï¼ˆè®¾ç½®ï¼‰</li>
                <li>åœ¨å·¦ä¾§èœå•æœ€åº•éƒ¨æ‰¾åˆ° <strong>Developer settings</strong>ï¼ˆå¼€å‘è€…è®¾ç½®ï¼‰</li>
                <li>é€‰æ‹© <strong>OAuth Apps</strong></li>
            </ol>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 2ï¼šåˆ›å»ºæ–°çš„ OAuth åº”ç”¨</h3>
            <ol>
                <li>ç‚¹å‡» <strong>New OAuth App</strong> æŒ‰é’®</li>
                <li>å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
                    <table>
                        <tr>
                            <th>å­—æ®µ</th>
                            <th>è¯´æ˜</th>
                            <th>ç¤ºä¾‹å€¼</th>
                        </tr>
                        <tr>
                            <td>Application name</td>
                            <td>åº”ç”¨åç§°ï¼ˆç”¨æˆ·ä¼šçœ‹åˆ°ï¼‰</td>
                            <td>æˆ‘çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ</td>
                        </tr>
                        <tr>
                            <td>Homepage URL</td>
                            <td>åº”ç”¨ä¸»é¡µåœ°å€</td>
                            <td>http://localhost:5173</td>
                        </tr>
                        <tr>
                            <td>Authorization callback URL</td>
                            <td>è®¤è¯å›è°ƒåœ°å€ï¼ˆé‡è¦ï¼ï¼‰</td>
                            <td>http://localhost:5000/auth/github/callback</td>
                        </tr>
                        <tr>
                            <td>Application description</td>
                            <td>åº”ç”¨æè¿°ï¼ˆå¯é€‰ï¼‰</td>
                            <td>åŸºäº GitHub çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ</td>
                        </tr>
                    </table>
                </li>
                <li>ç‚¹å‡» <strong>Register application</strong></li>
            </ol>
        </div>

        <div class="warning">
            <strong>âš ï¸ é‡è¦æç¤ºï¼š</strong>
            <ul>
                <li>å›è°ƒ URL å¿…é¡»ä¸æ‚¨çš„åº”ç”¨é…ç½®å®Œå…¨åŒ¹é…ï¼ŒåŒ…æ‹¬åè®®ï¼ˆhttp/httpsï¼‰å’Œç«¯å£å·</li>
                <li>å¼€å‘ç¯å¢ƒé€šå¸¸ä½¿ç”¨ <code>http://localhost:5000/auth/github/callback</code></li>
                <li>ç”Ÿäº§ç¯å¢ƒéœ€è¦ä½¿ç”¨ HTTPSï¼Œå¦‚ <code>https://yourdomain.com/auth/github/callback</code></li>
            </ul>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 3ï¼šè·å–åº”ç”¨å‡­æ®</h3>
            <p>åˆ›å»ºæˆåŠŸåï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼š</p>
            <ul>
                <li><strong>Client ID</strong>ï¼šåº”ç”¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå…¬å¼€çš„ï¼‰</li>
                <li><strong>Client Secret</strong>ï¼šåº”ç”¨çš„å¯†é’¥ï¼ˆéœ€è¦ä¿å¯†ï¼ï¼‰</li>
            </ul>
            <p>ç‚¹å‡» <strong>Generate a new client secret</strong> ç”Ÿæˆå¯†é’¥ï¼Œå¹¶ç«‹å³å¤åˆ¶ä¿å­˜ã€‚</p>
        </div>

        <h2>äºŒã€é…ç½®æœ¬åœ°åº”ç”¨</h2>

        <div class="step">
            <h3>æ­¥éª¤ 1ï¼šè®¾ç½®ç¯å¢ƒå˜é‡</h3>
            <p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºæˆ–ç¼–è¾‘ <code>.env</code> æ–‡ä»¶ï¼š</p>
            <div class="code-block">
# GitHub OAuth é…ç½®
GITHUB_CLIENT_ID=ä½ çš„_Client_ID
GITHUB_CLIENT_SECRET=ä½ çš„_Client_Secret
GITHUB_CALLBACK_URL=http://localhost:5000/auth/github/callback

# å¯é€‰ï¼šGitHub Personal Access Tokenï¼ˆç”¨äº API è°ƒç”¨ï¼‰
GITHUB_TOKEN=ä½ çš„_Personal_Access_Token

# Session å¯†é’¥
SECRET_KEY=éšæœºç”Ÿæˆçš„å®‰å…¨å¯†é’¥
            </div>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 2ï¼šé…ç½®åº”ç”¨è®¾ç½®</h3>
            <p>é€šè¿‡é…ç½®ç®¡ç†å™¨è®¾ç½® GitHub é›†æˆï¼š</p>
            <div class="code-block">
# ä½¿ç”¨ Python è„šæœ¬é…ç½®
from models.config import ConfigManager

config = ConfigManager()
config.set_config('github.client_id', 'ä½ çš„_Client_ID')
config.set_config('github.client_secret', 'ä½ çš„_Client_Secret')
config.set_config('github.callback_url', 'http://localhost:5000/auth/github/callback')
            </div>
        </div>

        <h2>ä¸‰ã€OAuth è®¤è¯æµç¨‹æµ‹è¯•</h2>

        <div class="example">
            <h3>å®Œæ•´çš„è®¤è¯æµç¨‹ç¤ºä¾‹</h3>
            
            <h4>1. ç”¨æˆ·ç‚¹å‡»"ä½¿ç”¨ GitHub ç™»å½•"æŒ‰é’®</h4>
            <p>å‰ç«¯ä»£ç ç¤ºä¾‹ï¼š</p>
            <div class="code-block">
// å‰ç«¯ JavaScript
function loginWithGitHub() {
    window.location.href = '/auth/github';
}
            </div>

            <h4>2. åç«¯é‡å®šå‘åˆ° GitHub</h4>
            <p>ç”¨æˆ·è¢«é‡å®šå‘åˆ° GitHub æˆæƒé¡µé¢ï¼š</p>
            <div class="code-block">
https://github.com/login/oauth/authorize?
    client_id=YOUR_CLIENT_ID&
    redirect_uri=http://localhost:5000/auth/github/callback&
    scope=user,repo&
    state=random_state_string
            </div>

            <h4>3. ç”¨æˆ·æˆæƒåå›è°ƒ</h4>
            <p>GitHub å°†ç”¨æˆ·é‡å®šå‘å›æ‚¨çš„åº”ç”¨ï¼Œå¸¦æœ‰æˆæƒç ï¼š</p>
            <div class="code-block">
http://localhost:5000/auth/github/callback?code=AUTHORIZATION_CODE&state=random_state_string
            </div>

            <h4>4. åç«¯è·å–è®¿é—®ä»¤ç‰Œ</h4>
            <p>ä½¿ç”¨æˆæƒç äº¤æ¢è®¿é—®ä»¤ç‰Œï¼š</p>
            <div class="code-block">
POST https://github.com/login/oauth/access_token
Content-Type: application/json

{
    "client_id": "YOUR_CLIENT_ID",
    "client_secret": "YOUR_CLIENT_SECRET",
    "code": "AUTHORIZATION_CODE"
}
            </div>

            <h4>5. è·å–ç”¨æˆ·ä¿¡æ¯</h4>
            <p>ä½¿ç”¨è®¿é—®ä»¤ç‰Œè·å–ç”¨æˆ·ä¿¡æ¯ï¼š</p>
            <div class="code-block">
GET https://api.github.com/user
Authorization: token ACCESS_TOKEN
            </div>
        </div>

        <h2>å››ã€æµ‹è¯•æ­¥éª¤</h2>

        <div class="step">
            <h3>æ­¥éª¤ 1ï¼šå¯åŠ¨åº”ç”¨</h3>
            <div class="code-block">
# å¯åŠ¨åç«¯æœåŠ¡
cd backend
python app.py

# å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
cd frontend
npm run dev
            </div>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 2ï¼šæµ‹è¯•è®¤è¯æµç¨‹</h3>
            <ol>
                <li>è®¿é—® <code>http://localhost:5173</code></li>
                <li>ç‚¹å‡»"ä½¿ç”¨ GitHub ç™»å½•"æŒ‰é’®</li>
                <li>æ‚¨å°†è¢«é‡å®šå‘åˆ° GitHub æˆæƒé¡µé¢</li>
                <li>æŸ¥çœ‹è¯·æ±‚çš„æƒé™å¹¶ç‚¹å‡»"Authorize"ï¼ˆæˆæƒï¼‰</li>
                <li>æˆåŠŸåå°†è¿”å›åˆ°åº”ç”¨ï¼Œå¹¶æ˜¾ç¤ºæ‚¨çš„ GitHub ç”¨æˆ·å</li>
            </ol>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 3ï¼šéªŒè¯åŠŸèƒ½</h3>
            <p>ç™»å½•æˆåŠŸåï¼Œæµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
            <ul>
                <li>æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ï¼šè®¿é—® <code>/api/user/profile</code></li>
                <li>åˆ—å‡ºä»“åº“ï¼šè®¿é—® <code>/api/repos</code></li>
                <li>æ£€æŸ¥è®¤è¯çŠ¶æ€ï¼šæŸ¥çœ‹æµè§ˆå™¨çš„ Session Cookie</li>
            </ul>
        </div>

        <h2>äº”ã€æƒé™èŒƒå›´ï¼ˆScopesï¼‰</h2>

        <table>
            <tr>
                <th>Scope</th>
                <th>æƒé™è¯´æ˜</th>
                <th>ä½¿ç”¨åœºæ™¯</th>
            </tr>
            <tr>
                <td><code>user</code></td>
                <td>è¯»å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯</td>
                <td>è·å–ç”¨æˆ·åã€é‚®ç®±ã€å¤´åƒ</td>
            </tr>
            <tr>
                <td><code>user:email</code></td>
                <td>è¯»å–ç”¨æˆ·é‚®ç®±åœ°å€</td>
                <td>éœ€è¦ç”¨æˆ·é‚®ç®±æ—¶</td>
            </tr>
            <tr>
                <td><code>repo</code></td>
                <td>å®Œå…¨è®¿é—®ç§æœ‰å’Œå…¬å¼€ä»“åº“</td>
                <td>ç®¡ç†ä»“åº“ã€åˆ›å»ºåˆ†æ”¯ã€æäº¤ä»£ç </td>
            </tr>
            <tr>
                <td><code>public_repo</code></td>
                <td>åªè®¿é—®å…¬å¼€ä»“åº“</td>
                <td>åªéœ€è¦è®¿é—®å…¬å¼€ä»“åº“æ—¶</td>
            </tr>
            <tr>
                <td><code>write:repo_hook</code></td>
                <td>ç®¡ç†ä»“åº“ Webhooks</td>
                <td>è®¾ç½®è‡ªåŠ¨åŒ–é›†æˆ</td>
            </tr>
        </table>

        <div class="info">
            <strong>ğŸ’¡ æœ€ä½³å®è·µï¼š</strong>åªè¯·æ±‚åº”ç”¨å®é™…éœ€è¦çš„æœ€å°æƒé™é›†ã€‚è¿‡å¤šçš„æƒé™è¯·æ±‚ä¼šè®©ç”¨æˆ·æ„Ÿåˆ°ä¸å®‰ã€‚
        </div>

        <h2>å…­ã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h2>

        <div class="warning">
            <h3>é—®é¢˜ 1ï¼šå›è°ƒ URL ä¸åŒ¹é…</h3>
            <p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong><code>The redirect_uri MUST match the registered callback URL</code></p>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ul>
                <li>ç¡®ä¿ OAuth åº”ç”¨è®¾ç½®ä¸­çš„å›è°ƒ URL ä¸ä»£ç ä¸­çš„å®Œå…¨ä¸€è‡´</li>
                <li>æ£€æŸ¥åè®®ï¼ˆhttp/httpsï¼‰ã€åŸŸåã€ç«¯å£å·æ˜¯å¦åŒ¹é…</li>
                <li>ä¸è¦åœ¨ URL æœ«å°¾åŠ æ–œæ </li>
            </ul>
        </div>

        <div class="warning">
            <h3>é—®é¢˜ 2ï¼šInvalid client_id or client_secret</h3>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ul>
                <li>æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®åŠ è½½</li>
                <li>ç¡®è®¤ Client Secret æ²¡æœ‰è¿‡æœŸæˆ–è¢«é‡æ–°ç”Ÿæˆ</li>
                <li>æ£€æŸ¥æ˜¯å¦æœ‰å¤šä½™çš„ç©ºæ ¼æˆ–æ¢è¡Œç¬¦</li>
            </ul>
        </div>

        <div class="warning">
            <h3>é—®é¢˜ 3ï¼šç”¨æˆ·å–æ¶ˆæˆæƒ</h3>
            <p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong><code>access_denied</code></p>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ul>
                <li>åœ¨å›è°ƒå¤„ç†ä¸­æ£€æŸ¥ <code>error</code> å‚æ•°</li>
                <li>å‹å¥½åœ°æç¤ºç”¨æˆ·å¹¶æä¾›é‡æ–°æˆæƒçš„é€‰é¡¹</li>
                <li>è®°å½•é”™è¯¯æ—¥å¿—ç”¨äºåˆ†æ</li>
            </ul>
        </div>

        <h2>ä¸ƒã€å®‰å…¨æœ€ä½³å®è·µ</h2>

        <div class="success">
            <h3>âœ… æ¨èåšæ³•</h3>
            <ul>
                <li><strong>æ°¸è¿œä¸è¦</strong>åœ¨å‰ç«¯ä»£ç ä¸­æš´éœ² Client Secret</li>
                <li>ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯</li>
                <li>å®ç° CSRF ä¿æŠ¤ï¼ˆä½¿ç”¨ state å‚æ•°ï¼‰</li>
                <li>å®šæœŸè½®æ¢ Client Secret</li>
                <li>ä½¿ç”¨ HTTPS è¿›è¡Œæ‰€æœ‰é€šä¿¡ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</li>
                <li>é™åˆ¶ OAuth åº”ç”¨çš„æƒé™èŒƒå›´</li>
                <li>å®ç°è®¿é—®ä»¤ç‰Œçš„å®‰å…¨å­˜å‚¨å’Œç®¡ç†</li>
            </ul>
        </div>

        <h2>å…«ã€è°ƒè¯•æŠ€å·§</h2>

        <div class="info">
            <h3>ğŸ” è°ƒè¯•å»ºè®®</h3>
            <ul>
                <li>ä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æŸ¥çœ‹ç½‘ç»œè¯·æ±‚</li>
                <li>åœ¨åç«¯æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è®°å½•</li>
                <li>ä½¿ç”¨ <code>curl</code> æˆ– Postman æµ‹è¯• API ç«¯ç‚¹</li>
                <li>æ£€æŸ¥ GitHub OAuth åº”ç”¨çš„è®¿é—®æ—¥å¿—</li>
            </ul>
        </div>

        <div class="code-block">
# æµ‹è¯• GitHub API è¿æ¥
curl -H "Authorization: token YOUR_ACCESS_TOKEN" https://api.github.com/user

# æŸ¥çœ‹è¯¦ç»†çš„è¯·æ±‚å“åº”
curl -v https://api.github.com/user
        </div>

        <div class="success">
            <h3>ğŸ‰ æ­å–œï¼</h3>
            <p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæ‚¨çš„åº”ç”¨å°±å¯ä»¥ä½¿ç”¨ GitHub OAuth è¿›è¡Œç”¨æˆ·è®¤è¯äº†ã€‚ç”¨æˆ·å¯ä»¥ï¼š</p>
            <ul>
                <li>ä½¿ç”¨ GitHub è´¦å·å¿«é€Ÿç™»å½•</li>
                <li>æˆæƒåº”ç”¨è®¿é—®å…¶ GitHub èµ„æº</li>
                <li>äº«å—é›†æˆçš„ GitHub åŠŸèƒ½</li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button onclick="window.print()" style="background-color: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">ğŸ–¨ï¸ æ‰“å°æœ¬æŒ‡å—</button>
            <button onclick="window.location.href='github-integration-guide.html'" style="background-color: #0366d6; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-left: 10px;">ğŸ“š è¿”å›ä¸»æŒ‡å—</button>
        </div>
    </div>
</body>
</html>